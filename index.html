<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wiersze.Derda.Site</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    .poem {
      min-height: calc(100vh - 8rem);
    }
  </style>
</head>
<body class="bg-white text-gray-700 flex h-screen overflow-hidden items-stretch">
  <!-- Sidebar Navigation -->
  <div class="sidebar bg-white w-48 overflow-y-auto border-r border-gray-100 flex flex-col">
    <div class="p-4 border-b border-gray-100">
      <h1 class="text-xl font-bold text-gray-800">Wiersze.Derda.Site</h1>
    </div>
    <div class="overflow-y-auto" id="poem-list">
      <!-- Poem dates will be added here by JavaScript -->
    </div>
  </div>

  <!-- Main Content -->
  <div class="flex-1 flex flex-col overflow-hidden">
    <!-- Navigation Buttons -->
    <div class="bg-white p-4 border-b border-gray-100 flex justify-end">
      <div class="flex space-x-2">
        <button id="prevPoemBtn" class="p-2 rounded-full hover:bg-amber-100 transition">
          <i class="fas fa-chevron-left"></i>
        </button>
        <button id="nextPoemBtn" class="p-2 rounded-full hover:bg-amber-200 transition">
          <i class="fas fa-chevron-right"></i>
        </button>
      </div>
    </div>

    <!-- Poems Container -->
    <div class="poem-container overflow-y-auto flex-1">
      <!-- Poems will be added here by JavaScript -->
    </div>
  </div>


  <script>
    // Sample poems data
    let poems = [
      {
        date: "2023-01-01",
        title: "Brzeg",
        content: `Powoli odklejam się od brzegów<br>
        tej myśli, co tonie<br>
        jeszcze żyję, ale<br>
        już nie jestem pewien, gdzie kończę się ja,<br>
        a zaczyna cisza.`
      },
      {
        date: "2023-01-02",
        title: "Poranek",
        content: `Światło wlewa się przez szparę<br>
        między nocą a dniem<br>
        kropla słońca na podłodze<br>
        rośnie jak nieśmiałe "tak".`
      },
      {
        date: "2023-01-03",
        title: "Wieczór",
        content: `Zmierzch układa się na półkach<br>
        między książkami a kurzem<br>
        cień mojej dłoni<br>
        pisze wiersze bez słów.`
      },
      {
        date: "2023-01-04",
        title: "Mgła",
        content: `Mgła jak zapomnienie<br>
        rozmywa kontury świata<br>
        tylko drzewa wytrwale<br>
        piszą wiersze w powietrzu.`
      },
      {
        date: "2023-01-05",
        title: "Kropla",
        content: `Kropla deszczu na szybie<br>
        pisze historię, która znika<br>
        zanim zdążę ją przeczytać<br>
        a szkło pamięta tylko wilgoć.`
      }
    ];

    // DOM elements
    const poemList = document.getElementById('poem-list');
    const poemContainer = document.querySelector('.poem-container');
    const currentPoemDate = document.getElementById('current-poem-date');
    const currentPoemDateDisplay = document.getElementById('current-poem-date-display');

    // Current poem index
    let currentIndex = 0;

    // Format date
    function formatDate(dateString) {
      const date = new Date(dateString);
      const options = { day: 'numeric', month: 'long', year: 'numeric' };
      return date.toLocaleDateString('pl-PL', options);
    }

    // Format date for sidebar
    function formatSidebarDate(dateString) {
      const date = new Date(dateString);
      const day = date.getDate();
      const month = date.getMonth() + 1;
      return `${day < 10 ? '0' + day : day}.${month < 10 ? '0' + month : month}`;
    }

    // Format month header
    function formatMonthHeader(dateString) {
      const date = new Date(dateString);
      const options = { month: 'long', year: 'numeric' };
      return date.toLocaleDateString('pl-PL', options);
    }

    // Render poems list in sidebar grouped by month
    function renderPoemList() {
      poemList.innerHTML = '';
      poems.sort((a, b) => new Date(b.date) - new Date(a.date));
      
      let currentMonth = '';
      
      poems.forEach((poem, index) => {
        const poemDate = new Date(poem.date);
        const poemMonth = formatMonthHeader(poem.date);
        
        // Add month header if new month
        if (poemMonth !== currentMonth) {
          currentMonth = poemMonth;
          const monthHeader = document.createElement('div');
          monthHeader.className = 'px-4 py-2 text-sm font-medium text-gray-500 bg-gray-50 sticky top-0';
          monthHeader.textContent = currentMonth;
          poemList.appendChild(monthHeader);
        }
        
        const poemItem = document.createElement('div');
        poemItem.className = `sidebar-item px-4 py-2 hover:bg-gray-100 cursor-pointer ${index === currentIndex ? 'bg-gray-100' : ''}`;
        poemItem.dataset.index = index;
        
        poemItem.innerHTML = `
          <div class="text-gray-800">${formatDate(poem.date)}</div>
        `;
        
        poemItem.addEventListener('click', () => {
          currentIndex = index;
          renderCurrentPoem();
          updateSidebarActiveItem();
        });
        
        poemList.appendChild(poemItem);
      });
    }

    // Render current poem
    function renderCurrentPoem() {
      poemContainer.innerHTML = '';
      
      const poem = poems[currentIndex];
      const poemElement = document.createElement('div');
      poemElement.className = 'poem p-8 md:p-12 flex flex-col justify-center';
      
      poemElement.innerHTML = `
        <div class="text-2xl font-serif text-gray-700 mb-1">${formatDate(poem.date)}</div>
        ${poem.title ? `<div class="text-base font-serif text-gray-600 mb-6">${poem.title}</div>` : ''}
        <div class="text-lg md:text-xl font-serif leading-relaxed max-w-2xl mx-auto text-gray-500">${poem.content}</div>
      `;
      
      poemContainer.appendChild(poemElement);
      currentPoemDate.textContent = poem.title;
      currentPoemDateDisplay.textContent = formatDate(poem.date);
      
      // Scroll to top
      poemContainer.scrollTo(0, 0);
    }

    // Update active item in sidebar
    function updateSidebarActiveItem() {
      const items = poemList.querySelectorAll('.sidebar-item');
      items.forEach((item, index) => {
        if (index === currentIndex) {
          item.classList.add('bg-gray-200');
        } else {
          item.classList.remove('bg-gray-200');
        }
      });
    }

    // Navigation
    prevPoemBtn.addEventListener('click', () => {
      if (currentIndex > 0) {
        currentIndex--;
        renderCurrentPoem();
        updateSidebarActiveItem();
      }
    });

    nextPoemBtn.addEventListener('click', () => {
      if (currentIndex < poems.length - 1) {
        currentIndex++;
        renderCurrentPoem();
        updateSidebarActiveItem();
      }
    });

    // Initialize
    renderPoemList();
    renderCurrentPoem();
  </script>
</body>
</html>
